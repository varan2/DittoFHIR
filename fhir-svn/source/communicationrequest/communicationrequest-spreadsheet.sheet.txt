
=== Sheet Bindings =====================================

 -- Row 1 -----------------------------------
  Binding Name = CommunicationRequestStatus
  Binding = value set
  Reference = http://hl7.org/fhir/ValueSet/request-status
  Definition = The status of the communication request.
  Conformance = required

 -- Row 2 -----------------------------------
  Binding Name = CommunicationCategory
  Binding = value set
  Reference = http://hl7.org/fhir/ValueSet/communication-category
  Definition = Codes for general categories of communications such as alerts, instruction, etc.
  Conformance = example

 -- Row 3 -----------------------------------
  Binding Name = CommunicationMedium
  Binding = value set
  Reference = http://hl7.org/fhir/ValueSet/v3-ParticipationMode
  Definition = Codes for communication mediums such as phone, fax, email, in person, etc.
  Conformance = example

 -- Row 4 -----------------------------------
  Binding Name = CommunicationReason
  Binding = value set
  Reference = http://hl7.org/fhir/ValueSet/v3-ActReason
  Definition = Codes for describing reasons for the occurrence of a communication.
  Conformance = example

 -- Row 5 -----------------------------------
  Binding Name = CommunicationPriority
  Binding = value set
  Reference = valueset-request-priority
  Definition = Codes indicating the relative importance of a communication request.
  Conformance = required

=== Sheet Invariants =====================================

 -- Row 1 -----------------------------------
  Id = 1
  Context = CommunicationRequest.requester
  English = onBehalfOf can only be specified if agent is practitioner or device
  XPath = contains(f:agent/f:reference/@value, \'/Practitioner/\') or contains(f:agent/f:reference/@value, \'/Device/\') or not(exists(f:onBehalfOf))
  Expression = (agent.resolve() is Practitioner) or (agent.resolve() is Device) or onBehalfOf.exists().not()

=== Sheet Data Elements =====================================

 -- Row 1 -----------------------------------
  Element = CommunicationRequest
  UML = 0;0
  Type = DomainResource
  Short Name = A request for information to be sent to a receiver
  Definition = A request to convey information; e.g. the CDS system proposes that an alert be sent to a responsible provider, the CDS system proposes that the public health agency be notified about a reportable condition.
  Workflow Mapping = Request
  w5 = workflow.order

 -- Row 2 -----------------------------------
  Element = CommunicationRequest.identifier
  Card. = 0..*
  Summary = Y
  Type = Identifier
  Short Name = Unique identifier
  Definition = A unique ID of this request for reference purposes. It must be provided if user wants it returned as part of any output, otherwise it will be autogenerated, if needed, by CDS system. Does not need to be the actual ID of the source system.
  Workflow Mapping = Request.identifier
  w5 = id

 -- Row 3 -----------------------------------
  Element = CommunicationRequest.basedOn
  Card. = 0..*
  Aliases = fulfills
  Summary = Y
  Type = Reference(Any)
  Short Name = Fulfills plan or proposal
  Definition = A plan or proposal that is fulfilled in whole or in part by this request
  Requirements = Allows tracing of authorization for the request and tracking whether proposals/recommendations were acted upon
  Workflow Mapping = Request.basedOn
  RIM Mapping = .outboundRelationship[typeCode=FLFS].target

 -- Row 4 -----------------------------------
  Element = CommunicationRequest.replaces
  Card. = 0..*
  Aliases = supersedes, prior
  Summary = Y
  Type = Reference(CommunicationRequest)
  Short Name = Request(s) replaced by this request
  Definition = Completed or terminated request(s) whose function is taken by this new request
  Requirements = Allows tracing the continuation of a therapy or administrative process instantiated through multiple requests
  Comments = The replacement could be because the initial request was immediately rejected (due to an issue) or because the previous request was completed, but the need for the action described by the request remains ongoing.
  Workflow Mapping = Request.replaces
  RIM Mapping = .outboundRelationship[typeCode=RPLC].target

 -- Row 5 -----------------------------------
  Element = CommunicationRequest.groupIdentifier
  Card. = 0..1
  Aliases = grouperId
  Summary = Y
  Type = Identifier
  Short Name = Composite request this is part of
  Definition = A shared identifier common to all requests that were authorized more or less simultaneously by a single author, representing the identifier of the requisition, prescription or similar form.
  Comments = Requests are linked either by a \"basedOn\" relationship (i.e. one request is fulfilling another) or by having a common requisition.  Requests that are part of the same requisition are generally treated independently from the perspective of changing their state or maintaining them after initial creation.
  Workflow Mapping = Request.groupIdentifier
  RIM Mapping = .inboundRelationship(typeCode=COMP].source[moodCode=INT].identifier

 -- Row 6 -----------------------------------
  Element = CommunicationRequest.status
  Card. = 1..1
  Is Modifier = Y
  Summary = Y
  Type = code
  Binding = CommunicationRequestStatus
  Short Name = draft | active | suspended | cancelled | completed | entered-in-error | unknown
  Definition = The status of the proposal or order.
  Comments = This element is labeled as a modifier because the status contains the codes cancelled and entered-in-error that mark the request as not currently valid
  Workflow Mapping = Request.status
  w5 = status

 -- Row 7 -----------------------------------
  Element = CommunicationRequest.category
  Card. = 0..*
  Type = CodeableConcept
  Binding = CommunicationCategory
  Short Name = Message category
  Definition = The type of message to be sent such as alert, notification, reminder, instruction, etc.
  Comments = There may be multiple axes of categorization and one communication request may serve multiple purposes.
  Workflow Mapping = Request.code
  w5 = class

 -- Row 8 -----------------------------------
  Element = CommunicationRequest.priority
  Card. = 0..1
  Summary = Y
  Type = code
  Binding = CommunicationPriority
  Short Name = Message urgency
  Definition = Characterizes how quickly the proposed act must be initiated. Includes concepts such as stat, urgent, routine.
  Workflow Mapping = Request.priority
  Missing Meaning = If missing, this task should be performed with normal priority
  w5 = grade

 -- Row 9 -----------------------------------
  Element = CommunicationRequest.medium
  Card. = 0..*
  Type = CodeableConcept
  Binding = CommunicationMedium
  Short Name = A channel of communication
  Definition = A channel that was used for this communication (e.g. email, fax).

 -- Row 10 -----------------------------------
  Element = CommunicationRequest.subject
  Card. = 0..1
  Aliases = patient
  Type = Reference(Patient|Group)
  Short Name = Focus of message
  Definition = The patient or group that is the focus of this communication request.
  Workflow Mapping = Request.subject
  w5 = who.focus

 -- Row 11 -----------------------------------
  Element = CommunicationRequest.recipient
  Card. = 0..*
  Type = Reference(Device|Organization|Patient|Practitioner|RelatedPerson|Group|CareTeam)
  Short Name = Message recipient
  Definition = The entity (e.g. person, organization, clinical information system, device, group, or care team) which is the intended target of the communication
  Workflow Mapping = Request.performer
  w5 = who.focus

 -- Row 12 -----------------------------------
  Element = CommunicationRequest.topic
  Card. = 0..*
  Type = Reference(Any)
  Short Name = Focal resources
  Definition = The resources which were related to producing this communication request.
  Workflow Mapping = Request.supportingInfo
  Committee Notes = GF#11381
  w5 = context

 -- Row 13 -----------------------------------
  Element = CommunicationRequest.context
  Card. = 0..1
  Aliases = encounter
  Summary = Y
  Type = Reference(Encounter|EpisodeOfCare)
  Short Name = Encounter or episode leading to message
  Definition = The encounter or episode of care within which the communication request was created.
  Workflow Mapping = Request.context
  Committee Notes = GF#11381
  w5 = context

 -- Row 14 -----------------------------------
  Element = CommunicationRequest.payload
  Card. = 0..*
  UML = 380;40
  Short Name = Message payload
  Definition = Text, attachment(s), or resource(s) to be communicated to the recipient

 -- Row 15 -----------------------------------
  Element = CommunicationRequest.payload.content[x]
  Card. = 1..1
  Type = string|Attachment|Reference(Any)
  Short Name = Message part content
  Definition = The communicated content (or for multi-part communications, one portion of the communication)
  Workflow Mapping = Request.supportingInfo, Request.note {supportingInfo if Reference, note if string,  No mapping if Attachment}

 -- Row 16 -----------------------------------
  Element = CommunicationRequest.occurrence[x]
  Card. = 0..1
  Aliases = timing
  Summary = Y
  Type = dateTime|Period
  Short Name = When scheduled
  Definition = The time when this communication is to occur.
  Workflow Mapping = Request.occurrence
  w5 = when.planned

 -- Row 17 -----------------------------------
  Element = CommunicationRequest.authoredOn
  Card. = 0..1
  Aliases = createdOn
  Summary = Y
  Type = dateTime
  Short Name = When request transitioned to being actionable
  Definition = For draft requests, indicates the date of initial creation.  For requests with other statuses, indicates the date of activation.
  Workflow Mapping = Request.authoredOn
  w5 = when.recorded

 -- Row 18 -----------------------------------
  Element = CommunicationRequest.sender
  Card. = 0..1
  Type = Reference(Device|Organization|Patient|Practitioner|RelatedPerson)
  Short Name = Message sender
  Definition = The entity (e.g. person, organization, clinical information system, or device) which is to be the source of the communication
  Workflow Mapping = Request.requester.agent
  w5 = who.actor

 -- Row 19 -----------------------------------
  Element = CommunicationRequest.requester
  Card. = 0..1
  Aliases = author
  Summary = Y
  UML = 380;240
  Short Name = Who/what is requesting service
  Definition = The individual who initiated the request and has responsibility for its activation
  Workflow Mapping = Request.requester
  RIM Mapping = .participation[typeCode=AUT].role

 -- Row 20 -----------------------------------
  Element = CommunicationRequest.requester.agent
  Card. = 1..1
  Summary = Y
  Type = Reference(Practitioner|Organization|Patient|RelatedPerson|Device)
  Short Name = Individual making the request
  Definition = The device, practitioner, etc. who initiated the request
  Workflow Mapping = Request.requester.agent
  RIM Mapping = .player
  w5 = who.author

 -- Row 21 -----------------------------------
  Element = CommunicationRequest.requester.onBehalfOf
  Card. = 0..1
  Summary = Y
  Inv. = 1
  Type = Reference(Organization)
  Short Name = Organization agent is acting for
  Definition = The organization the device or practitioner was acting on behalf of
  Requirements = Practitioners and Devices can be associated with multiple organizations.  This element indicates which organization they were acting on behalf of when authoring the request
  Workflow Mapping = Request.requester.onBehalfOf
  RIM Mapping = .scoper

 -- Row 22 -----------------------------------
  Element = CommunicationRequest.reasonCode
  Card. = 0..*
  Summary = Y
  Type = CodeableConcept
  Binding = CommunicationReason
  Short Name = Why is communication needed?
  Definition = Describes why the request is being made in coded or textual form.
  Comments = Textual reasons can be caprued using reasonCode.text
  Workflow Mapping = Request.reasonCode
  RIM Mapping = .reasonCode
  w5 = why

 -- Row 23 -----------------------------------
  Element = CommunicationRequest.reasonReference
  Card. = 0..*
  Summary = Y
  Type = Reference(Condition|Observation)
  Short Name = Why is communication needed?
  Definition = Indicates another resource whose existence justifies this request
  Workflow Mapping = Request.reasonReference
  RIM Mapping = .outboundRelationship[typeCode=RSON].target
  w5 = why

 -- Row 24 -----------------------------------
  Element = CommunicationRequest.note
  Card. = 0..*
  Type = Annotation
  Short Name = Comments made about communication request
  Definition = Comments made about the request by the requester, sender, recipient, subject or other participants.
  Workflow Mapping = Request.note
  RIM Mapping = .inboundRelationship(typeCode=SUBJ].source[classCode=ANNGEN, moodCode=EVN].value[xsi:type=ST]

=== Sheet Search =====================================

 -- Row 1 -----------------------------------
  Name = identifier
  Type = token
  Path = CommunicationRequest.identifier

 -- Row 2 -----------------------------------
  Name = category
  Type = token
  Path = CommunicationRequest.category

 -- Row 3 -----------------------------------
  Name = sender
  Type = reference
  Path = CommunicationRequest.sender

 -- Row 4 -----------------------------------
  Name = recipient
  Type = reference
  Path = CommunicationRequest.recipient

 -- Row 5 -----------------------------------
  Name = medium
  Type = token
  Path = CommunicationRequest.medium

 -- Row 6 -----------------------------------
  Name = requester
  Type = reference
  Path = CommunicationRequest.requester.agent

 -- Row 7 -----------------------------------
  Name = status
  Type = token
  Path = CommunicationRequest.status

 -- Row 8 -----------------------------------
  Name = context
  Type = reference
  Path = CommunicationRequest.context

 -- Row 9 -----------------------------------
  Name = occurrence
  Type = date
  Path = CommunicationRequest.occurrenceDateTime

 -- Row 10 -----------------------------------
  Name = authored
  Type = date
  Path = CommunicationRequest.authoredOn

 -- Row 11 -----------------------------------
  Name = subject
  Type = reference
  Path = CommunicationRequest.subject

 -- Row 12 -----------------------------------
  Name = priority
  Type = token
  Path = CommunicationRequest.priority

 -- Row 13 -----------------------------------
  Name = patient
  Type = reference
  Path = CommunicationRequest.subject
  Target Types = Patient

 -- Row 14 -----------------------------------
  Name = based-on
  Type = reference
  Path = CommunicationRequest.basedOn

 -- Row 15 -----------------------------------
  Name = replaces
  Type = reference
  Path = CommunicationRequest.replaces

 -- Row 16 -----------------------------------
  Name = group-identifier
  Type = token
  Path = CommunicationRequest.groupIdentifier

 -- Row 17 -----------------------------------
  Name = encounter
  Type = reference
  Description = Encounter leading to message
  Path = CommunicationRequest.context
  Target Types = Encounter

=== Sheet Profiles =====================================

 -- Row 1 -----------------------------------
  Name = communicationrequest-extensions
  IG Name = core
  Filename = communicationrequest-extensions.xml
  Type = spreadsheet

=== Sheet Examples =====================================

 -- Row 1 -----------------------------------
  Name = Alert Message
  Identity = example
  Description = An example of an alert message
  Filename = communicationrequest-example.xml

 -- Row 2 -----------------------------------
  Name = FM Solicit an Attachment
  Identity = fm-solicit
  Description = An example of a request for additional information
  Filename = communicationrequest-example-fm-solicit-attachment.xml

=== Sheet Examples =====================================
